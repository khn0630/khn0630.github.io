---
title: Python 3에서 range함수 최적화
date: 2023-08-21 20:00:00 +0900
categories:
  - python
tags:
  - Python3
  - range함수
---

## 개요

Python 3에서 `1000000000000000 in range(1000000000000001)` 문장이 매우 빠르게 실행되는 이유에 대해서 알아보겠습니다. 이러한 현상이 발생하는 원인은 Python 3의 `range` 함수와 관련된 최적화 때문입니다.

## `range` 함수의 특성

`range` 함수는 Python 3에서 특별한 타입의 객체를 반환합니다. 이 객체는 실제로 모든 숫자를 메모리에 저장하지 않습니다. 대신 시작 값(`start`), 끝 값(`stop`), 그리고 간격(`step`)만을 저장하고, 이를 바탕으로 필요한 숫자를 생성합니다. 이러한 방식을 **지연 평가(lazy evaluation)**라고 합니다.

## 최적화 원리

`1000000000000000 in range(1000000000000001)`과 같은 문장이 빠르게 실행되는 원인은, `in` 연산자가 `range` 객체에 최적화되어 있기 때문입니다. Python은 `start`, `stop`, `step`을 이용하여 해당 숫자가 범위 내에 있는지 빠르게 판단할 수 있습니다. 이러한 처리를 **수학적 최적화**라고 부릅니다.

## Big-O 표기법과 성능

일반적으로 리스트나 튜플에서 특정 요소를 찾는 것은 O(n)의 시간 복잡도를 가집니다. 그러나 `range` 객체에서는 O(1)의 시간 복잡도로 특정 요소를 찾을 수 있습니다. **Big-O 표기법**은 알고리즘의 성능을 나타내는 표기법으로, O(1)은 상수 시간을 의미하며, O(n)은 선형 시간을 의미합니다.

## 에러와 예외사항

이러한 최적화는 `range` 객체에만 적용됩니다. 만약 `list(range(1000000000000001))`처럼 리스트로 변환하면, 해당 최적화는 적용되지 않습니다. 이 경우 `MemoryError`가 발생할 가능성이 높습니다.

## 결론

Python 3의 `range` 함수는 특별한 최적화와 지연 평가 기법을 사용하여 매우 큰 범위의 숫자에 대해서도 빠른 `in` 연산을 지원합니다. 이로 인해 `1000000000000000 in range(1000000000000001)` 문장은 매우 빠르게 실행됩니다.