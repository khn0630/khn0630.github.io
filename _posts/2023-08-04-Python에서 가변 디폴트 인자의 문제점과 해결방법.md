---
title: Python에서 가변 디폴트 인자의 문제점과 해결방법
date: 2023-08-04 20:00:00 +0900
categories:
  - python
tags:
  - Python
  - 가변디폴트
---

## 가변 디폴트 인자란 무엇인가?

가변 디폴트 인자는 Python 언어에서 함수의 인자로 사용되는데, 이 인자의 값이 함수를 호출할 때마다 변경될 수 있는 속성을 가지고 있습니다. 예를 들어, 리스트나 딕셔너리 같은 데이터 구조가 이에 해당합니다. 이러한 가변 디폴트 인자는 'Least Astonishment'이라는 프로그래밍 원칙에 위배되어 문제를 일으킬 수 있습니다. 'Least Astonishment'은 프로그램이 사용자의 예상대로 동작해야 한다는 원칙입니다.

## 왜 문제가 되는가? (`MutableDefaultArgument` 오류)

문제가 되는 주된 이유는 가변 디폴트 인자가 함수 내에서 수정될 경우, 이 변경이 다음 함수 호출에서도 유지되기 때문입니다. 예를 들어, 함수 내에서 리스트에 요소를 추가하면, 그 함수가 다시 호출될 때 이전에 추가된 요소가 그대로 남아있습니다. 이것은 코드의 예측 가능성을 떨어뜨리고 버그를 유발할 가능성이 높습니다.

```python
# 예시 코드
def add_item(item, item_list=[]):
    item_list.append(item)
    return item_list

print(add_item(1))  # [1]
print(add_item(2))  # [1, 2] <- 문제 발생!
```

## 어떻게 해결할 수 있는가?

가변 디폴트 인자의 문제를 해결하기 위한 방법은 몇 가지 있습니다:

### `None` 사용하기

`None`을 디폴트 값으로 설정하고 함수 내에서 이 값을 확인하여 새로운 객체를 생성할 수 있습니다.

```python
def add_item(item, item_list=None):
    if item_list is None:
        item_list = []
    item_list.append(item)
    return item_list
```

### 불변 객체 사용하기

불변 객체, 예를 들어 튜플이나 문자열을 디폴트 값으로 사용할 수 있습니다. 이렇게 하면 함수 내에서 객체가 변경되더라도 다음 함수 호출에 영향을 주지 않습니다.

### `functools.partial` 사용하기

`functools.partial` 함수를 사용하여 디폴트 인자를 미리 설정할 수도 있습니다. 하지만 이 방법은 코드가 복잡해질 수 있으므로 주의가 필요합니다.

이러한 방법들을 통해 가변 디폴트 인자로 인한 문제를 효과적으로 해결할 수 있습니다. 이를 적용하면 코드의 안정성과 유지보수성이 크게 향상될 것입니다.